---
apiVersion: authentication.kubedoop.dev/v1alpha1
kind: AuthenticationClass
metadata:
  name: ldap
spec:
  provider:
    ldap:
      hostname: lldap
      searchBase: ou=people,dc=example,dc=com
      ldapFieldNames:
        email: mail
        uid: uid
      bindCredentials:
        secretClass: trino-ldap
      port: 3890
---
apiVersion: secrets.kubedoop.dev/v1alpha1
kind: SecretClass
metadata:
  name: trino-ldap
spec:
  backend:
    k8sSearch:
      searchNamespace:
        pod: {}
---
apiVersion: v1
kind: Secret
metadata:
  name: trino-ldap-credentials
  labels:
    secrets.kubedoop.dev/class: trino-ldap
type: Opaque
stringData:
  user: ($LDAP_TRINO_USERNAME)
  password: ($LDAP_TRINO_PASSWORD)
